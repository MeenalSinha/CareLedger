name: CareLedger CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  basic-checks:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Check Python files exist
      run: |
        echo "Checking repository structure..."
        ls -la
        echo "✓ Repository checked out successfully"
    
    - name: Verify core files
      run: |
        echo "Verifying core files..."
        test -f orchestrator.py && echo "✓ orchestrator.py found"
        test -f app.py && echo "✓ app.py found"
        test -f api.py && echo "✓ api.py found"
        test -f demo.py && echo "✓ demo.py found"
        test -d agents && echo "✓ agents/ directory found"
        test -d models && echo "✓ models/ directory found"
        test -d utils && echo "✓ utils/ directory found"
        echo "✓ All core files present"
    
    - name: Check Python syntax
      run: |
        echo "Checking Python syntax..."
        python -m py_compile orchestrator.py
        python -m py_compile app.py
        python -m py_compile api.py
        python -m py_compile demo.py
        python -m py_compile agents/*.py
        python -m py_compile models/*.py
        python -m py_compile utils/*.py
        echo "✓ All Python files have valid syntax"
    
    - name: Success
      run: |
        echo "========================================"
        echo "✅ All checks passed!"
        echo "========================================"
        echo "CareLedger repository is valid"
